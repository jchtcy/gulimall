# 一、虚拟机
## 1、安装虚拟机
````
网上找, VMware虚拟机安装Ubuntu
````
## 2、虚拟机配置远程连接
### 1、Ubuntu 启动SSH服务
````
Ubuntu 启动SSH服务
sudo apt-get install openssh-server

检查SSH服务是否启动命令
ps -e |grep ssh
````
### 2、配置root登录
````
gedit /etc/ssh/sshd_config
在第34行添加 PermitRootLogin yes

命令重启ssh服务
service ssh restart
````
# 二、Docker安装
## 1、卸载旧版本
````
for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done
````
## 2、设置 Docker 的存储库
````
1、软件更新
sudo apt-get update
此时从乌班图官网更新软件失败

2、设置阿里云镜像
备份原来的源
sudo cp /etc/apt/sources.list /etc/apt/sources_init.list

更换源
sudo gedit /etc/apt/sources.list

更换为以下内容
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse

3、添加 Docker 的官方 GPG 密钥

sudo apt-get install ca-certificates curl gnupg
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

4、将存储库添加到Apt源

echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
````
## 3、安装 Docker
````
1、安装Docker包
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

2、启动
sudo systemctl start docker

3、查看Docker的版本
docker version

4、通过运行映像来验证 Docker 引擎安装是否成功
sudo docker run hello-world

5、查看下载的 hello-world 镜像
docker images

6、开机启动docker
systemctl enable docker
````
## 4、卸载 Docker 引擎
````
1、下载依赖
sudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras

2、删除资源
rm -rf /var/lib/docker
# /var/lib/docker docker的默认工作路径
````
## 5、Docker配置阿里云
````
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://f214zc7d.mirror.aliyuncs.com"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
````
# 三、docker安装开发环境
## 1、docker中安装mysql
````
下载镜像: docker pull mysql:5.7

查看镜像: docker images

启动mysql: sudo docker run -p 3306:3306 --name mysql \
-v /mydata/mysql/log:/var/log/mysql \
-v /mydata/mysql/data:/var/lib/mysql \
-v /mydata/mysql/conf:/etc/mysql \
-e MYSQL_ROOT_PASSWORD=root \
-d mysql:5.7

修改配置: vi /mydata/mysql/conf/my.conf
[client]
default-character-set=utf8
[mysql]
default-character-set=utf8
[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
init_connect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_unicode_ci
skip-character-set-client-handshake
skip-name-resolve

重启容器使配置生效: docker restart mysql
````
## 2、docker中安装redis
````
下载镜像: docker pull redis

创建实例并启动: 
mkdir -p /mydata/redis/conf
touch /mydata/redis/conf/redis.conf
docker run -p 6379:6379 --name redis \
-v /mydata/redis/data:/data \
-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \
-d redis redis-server /etc/redis/redis.conf

数据持久化: 
vi /mydata/redis/conf/redis.conf
appendonly yes

重启redis使配置生效: docker restart redis
````
# 四、本地开发环境
## 1、idea
````
IDEA安装插件lombok，mybatisX。
IDEA设置里配置好maven
````
## 2、vsCode
````
Auto Close Tag
Auto Rename Tag
Chinese
HTML CSS Support
JavaScript ES6
Live Server
open in brower
Vetur
````
# 五、git
````
网上找, idea配置github提交项目代码
````
# 六、项目结构创建
## 1、新建github项目
````
仓库名gulimall
gitignore选中maven
许可证选Apache-2.0
创建两个分支: main(生产)和dev(开发)
````
## 2、从github上下拉项目
## 3、创建微服务模块
````
商品服务product
存储服务ware
订单服务order
优惠券服务coupon
用户服务member

导入web和openFeign
group：com.atguigu.gulimall
Artifact：gulimall-XXX
每一个服务，包名com.atguigu.gulimall.XXX{product/order/ware/coupon/member}
模块名：gulimall-XXX
````
## 4、父pom文件
````
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.atguigu.gulimall</groupId>
    <artifactId>gulimall</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>gulimall</name>
    <description>聚合服务</description>

    <packaging>pom</packaging>

    <modules>
        <module>gulimall-coupon</module>
        <module>gulimall-member</module>
        <module>gulimall-order</module>
        <module>gulimall-product</module>
        <module>gulimall-ware</module>
    </modules>

</project>
````
## 5、修改总项目的.gitignore, 加入以下内容
````
**/mvnw
**/mvnw.cmd
**/.mvn
**/target/
.idea
**/.gitignore
````
