# 一、环境搭建
````
1、创建gulimall-cart服务

2、引入依赖

3、C:\Windows\System32\drivers\etc hosts 添加域名映射
192.168.48.129(虚拟机ip) cart.gulimall.com

4、因为目前不用数据库，故排除掉
主启动类加 @SpringBootApplication(exclude = DataSourceAutoConfiguration.class)

5、application.properties 配置
spring.application.name=gulimall-cart
spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848
server.port=30000

6、为启动类添加注解，开启服务注册和发现、远程调用

7、修改网关，给购物车配置路由

8、把 resource/静态资源/html/static/cart 复制到 到 /mydata/nginx/html/static

9、复制cartList.html、sucess.html到 cart下
````
# 二、购物车功能基础
## 1、模型类抽取，Cart和CartItem
````
cart模块新增 Cart-购物车实体类、CartItem-购物项实体类
````
## 2、集成Redis和SpringSession
````
1、导入redis和SpringSession的依赖
<dependency>
  <groupId>org.springframework.session</groupId>
  <artifactId>spring-session-data-redis</artifactId>
</dependency>
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>

2、修改配置
spring.redis.host=192.168.48.129
spring.redis.port=6379

3、启动类添加注解 添加注解 
@EnableRedisHttpSession

4、复制认证模块GulimallSessionConfig 到 购物车模块
````
# 三、ThreadLocal 用户身份鉴别
````
1、购物车模块 新建UserInfoTo

2、公共模块 创建购物车常量类CartConstant 

3、自定义拦截器CartInterceptor, 临时用户信息放到ThreadLocal

4、把拦截器CartInterceptor 添加到WebMvcConfigurer配置类

5、查看购物车接口: 购物车模块 写/cart.html接口
````
# 四、添加商品到购物车
````
1、异步编排, 自定义线程池配置类

2、配置线程池 application.properties

3、商品模块 写/product/skusaleattrvalue/stringlist/{skuId}接口

4、购物车模块中编写远程调用feign接口

5、购物车模块 写/addToCart接口
````
# 五、刷新页面不断发请求问题，RedirectAttribute
````
1、购物车模块 写/addToCartSuccess.html接口, 查询购物车数据

2、/addToCart接口查询成功重定向到 http://cart.gulimall.com/addToCartSuccess.html
````
# 六、获取购物车
````
修改 购物车模块 /cart.html接口
````
# 七、选中购物项
````
购物车服务 写/checkItem接口
````
# 八、修改购物项数量
````
购物车服务 写/countItem接口
````
# 九、删除购物项
````
购物车服务 写/deleteItem接口
````
