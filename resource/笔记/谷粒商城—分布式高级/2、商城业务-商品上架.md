# 一、建立product索引
````
“index”: false, # 不可被检索，不生成index
“doc_values”: false # 默认为true，不可被聚合，es就不会维护一些聚合的信息
数组里是对象时用nested嵌入式属性

PUT product
{
    "mappings":{
        "properties": {
            "skuId":{ "type": "long" },
            "spuId":{ "type": "keyword" },
            "skuTitle": {
                "type": "text",
                "analyzer": "ik_smart"  
            },
            "skuPrice": { "type": "keyword" },  
            "skuImg"  : { 
              "type": "keyword" , 
              "index": false,
              "doc_values": false
            },  
            "saleCount":{ "type":"long" },
            "hasStock": { "type": "boolean" },
            "hotScore": { "type": "long"  },
            "brandId":  { "type": "long" },
            "catalogId": { "type": "long"  },
            "brandName": {
              "type": "keyword",
              "index": false,
              "doc_values": false
            }, 
            "brandImg":{
                "type": "keyword",
                "index": false, 
                "doc_values": false
            },
            "catalogName": {
              "type": "keyword",
              "index": false, 
              "doc_values": false
              
            }, 
            "attrs": {
                "type": "nested",
                "properties": {
                    "attrId": {"type": "long"  },
                    "attrName": {
                        "type": "keyword",
                        "index": false,
                        "doc_values": false
                    },
                    "attrValue": {"type": "keyword" }
                }
            }
        }
    }
}
````
# 二、商品上架
````
1、新建实体类 com.jch.common.to.es.SkuEsModel
2、修改返回值 R 增加泛型
3、查询sku是否有库存 /ware/waresku/hasstock
4、商品上架接口 /product/spuinfo/{spuId}/up
5、BizCodeEnum新增状态码
6、es保存商品接口 /search/save/product
7、新建枚举 SpuConstant
8、继续完成 4、商品上架接口
9、debug
10、kibana里查询数据 GET product/_search
````
